<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stretchy Cube ‚Äî Museum Specimen 02</title>
    <link rel="stylesheet" href="../css/style.css">
    <style>
        body { margin: 0; background: #050512; }
        .specimen-ui {
            position: fixed;
            inset: 0;
            pointer-events: none;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 40px;
            z-index: 10;
        }
        .ui-top { display: flex; justify-content: space-between; align-items: flex-start; pointer-events: auto; }
        .ui-bottom { display: flex; justify-content: space-between; align-items: flex-end; pointer-events: auto; }
        .meta-box {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 16px;
            padding: 24px;
            max-width: 300px;
        }
        .meta-box h1 { font-size: 1.5rem; margin-bottom: 8px; color: #88ffaa; }
        .meta-box p { font-size: 0.85rem; color: var(--text-muted); line-height: 1.5; }
        .nav-controls { display: flex; gap: 12px; }
        
        .unlock-screen {
            position: fixed;
            inset: 0;
            background: rgba(5, 5, 18, 0.9);
            backdrop-filter: blur(20px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            transition: opacity 0.5s;
        }
        .unlock-content { text-align: center; }
        .unlock-content h2 { font-size: 3rem; margin-bottom: 20px; color: #88ffaa; }

        .specimen-nav-links {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            width: 100%;
        }

        @media (max-width: 768px) {
            .specimen-ui {
                padding: 20px;
            }
            .ui-top {
                flex-direction: column;
                gap: 10px;
            }
            .ui-bottom {
                flex-direction: column;
                align-items: flex-start;
                gap: 20px;
            }
            .meta-box {
                max-width: 100%;
                padding: 16px;
            }
            .unlock-content h2 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body class="loading">

    <div id="canvas-container" style="position: fixed; inset: 0; z-index: 1; pointer-events: auto;"></div>

    <div class="loader" id="loader" role="status" aria-live="polite">
        <div class="loader-ring"></div>
        <div class="loader-text">Loading Specimen 02...</div>
    </div>

    <div class="unlock-screen" id="unlock-screen">
        <div class="unlock-content">
            <h2>Stretchy Cube</h2>
            <p style="color: var(--text-muted); margin-bottom: 40px;">Specimen 02 ¬∑ Elastic Distortion</p>
            <button class="btn-pill btn-primary" id="unlock-btn">Enter Specimen ‚ú¶</button>
        </div>
    </div>

    <div class="nav-overlay" id="nav-overlay">
        <div class="nav-container">
            <p class="nav-title">Select Specimen</p>
            <div class="nav-grid">
                <a href="jelly-sphere.html" class="nav-card theme-sphere">
                    <div class="nav-symbol">‚¨§</div>
                    <h4>Specimen 01</h4>
                    <span>Sphere</span>
                </a>
                <a href="jelly-cube.html" class="nav-card theme-cube">
                    <div class="nav-symbol">‚ñ†</div>
                    <h4>Specimen 02</h4>
                    <span>Cube</span>
                </a>
                <a href="jelly-starfish.html" class="nav-card theme-starfish">
                    <div class="nav-symbol">‚òÖ</div>
                    <h4>Specimen 03</h4>
                    <span>Starfish</span>
                </a>
                <a href="jelly-torus.html" class="nav-card theme-torus">
                    <div class="nav-symbol">‚óé</div>
                    <h4>Specimen 04</h4>
                    <span>Torus</span>
                </a>
                <a href="jelly-blob.html" class="nav-card theme-blob">
                    <div class="nav-symbol">‚¨•</div>
                    <h4>Specimen 05</h4>
                    <span>Rhombus</span>
                </a>
            </div>
            <button class="nav-close" id="nav-close">Close Terminal</button>
        </div>
    </div>

    <div class="specimen-ui">
        <div class="ui-top">
            <nav class="main-nav" data-no-toggle style="position: static; height: auto; background: transparent; backdrop-filter: none; border-bottom: none; padding: 0; display: flex; flex-direction: column; align-items: flex-start; gap: 10px;">
                <a href="../playground.html" class="nav-logo" style="margin-bottom: 10px;"><span aria-hidden="true">ü´ß</span> Playground</a>
                <div class="specimen-nav-links">
                    <button class="btn-pill btn-outline" id="nav-open" style="font-size: 0.8rem; padding: 8px 16px;">‚ú¶ Specimen Navigator</button>
                    <a href="jelly-sphere.html" class="btn-pill btn-outline" style="font-size: 0.8rem; padding: 8px 16px;">‚Üê Prev</a>
                    <a href="jelly-starfish.html" class="btn-pill btn-outline" style="font-size: 0.8rem; padding: 8px 16px;">Next ‚Üí</a>
                </div>
            </nav>
        </div>

        <div class="ui-bottom">
            <div class="meta-box">
                <h1>Stretchy Cube</h1>
                <p>A Euclidean anomaly. This specimen pulls outward under tension, creating elongated vertices that snap back with elastic force.</p>
            </div>
            <div style="text-align: right;">
                <p style="font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.2em; color: var(--text-muted);">Interaction Mode</p>
                <p style="color: #fff; font-weight: 700;">Elastic Tension</p>
            </div>
        </div>
    </div>

    <!-- Project Scripts -->
    <script src="../js/audio-manager.js"></script>
    <script src="../js/jelly-factory.js"></script>
    <script src="../js/jellies/cube-jelly.js"></script>

    <!-- External Libraries (Global r145 for file:// compatibility) -->
    <script src="https://unpkg.com/three@0.145.0/build/three.min.js"></script>
    <script src="https://unpkg.com/three@0.145.0/examples/js/controls/OrbitControls.js"></script>

    <!-- Custom Resilient Loader -->
    <script>
        (function() {
            let loaderRemoved = false;
            const timeout = setTimeout(remove, 4000);
            function remove() {
                if (loaderRemoved) return;
                loaderRemoved = true;
                clearTimeout(timeout);
                const l = document.getElementById('loader');
                if (l) {
                    l.style.opacity = '0';
                    setTimeout(() => {
                        l.style.display = 'none';
                        document.body.classList.remove('loading');
                    }, 500);
                }
            }
            window.addEventListener('load', remove);
            document.addEventListener('DOMContentLoaded', () => {
                console.log("Specimen 02 Loaded");
            });

            const audio = new window.AudioManager();
            let jelly = null;

            // Navigator Logic
            const overlay = document.getElementById('nav-overlay');
            const openBtn = document.getElementById('nav-open');
            const closeBtn = document.getElementById('nav-close');

            openBtn.addEventListener('click', () => overlay.classList.add('active'));
            closeBtn.addEventListener('click', () => overlay.classList.remove('active'));

            document.getElementById('unlock-btn').addEventListener('click', () => {
                audio.init();
                document.getElementById('unlock-screen').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('unlock-screen').style.display = 'none';
                    if (typeof window.CubeJelly !== 'undefined') {
                        jelly = new window.CubeJelly(audio);
                    } else {
                        console.error("CubeJelly Script Failed to Load.");
                    }
                }, 500);
            });
        })();
    </script>
</body>
</html>
